FROM openjdk:8-slim

RUN apt-get update
RUN apt-get install -y curl tar sudo rsync python wget python-pip python-dev build-essential



RUN cd /etc/apt/sources.list.d/
RUN wget https://archive.cloudera.com/cm6/6.1.1/ubuntu1604/apt/cloudera-manager.list
RUN apt-get update

RUN wget https://archive.cloudera.com/cm6/6.1.0/ubuntu1604/apt/archive.key
RUN apt-key add archive.key
RUN apt-get update

RUN apt-get install -y impala impala-server impala-catalog impala-state-store  impala-shell

WORKDIR /

#ADD entrypoint.sh /entrypoint.sh
#ADD scripts/start_impalad.sh /usr/bin/start_impalad.sh
#ADD scripts/start_catalogd.sh /usr/bin/start_catalogd.sh
#ADD scripts/start_statestored.sh /usr/bin/start_statestored.sh
#ADD wait_metastore.sh /usr/bin/wait_metastore.sh

ADD con/hdfs-site.xml /etc/impala/conf
ADD conf/hive-site.xml /etc/impala/conf
ADD conf/mapred-site.xml /etc/impala/conf
ADD conf/core-site.xml /etc/impala/conf
#ADD impala.conf.template /etc/impala/impala.conf.template